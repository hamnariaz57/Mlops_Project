{
  "name": "MLOps Exchange Rate API Alerts",
  "interval": "1m",
  "rules": [
    {
      "uid": "high-inference-latency",
      "title": "High Inference Latency Alert",
      "condition": "A",
      "data": [
        {
          "refId": "A",
          "queryType": "",
          "relativeTimeRange": {
            "from": 300,
            "to": 0
          },
          "datasourceUid": "prometheus",
          "model": {
            "expr": "histogram_quantile(0.95, rate(inference_latency_seconds_bucket[5m])) * 1000",
            "refId": "A",
            "legendFormat": "p95 Latency (ms)",
            "intervalMs": 1000,
            "maxDataPoints": 43200
          }
        }
      ],
      "noDataState": "NoData",
      "execErrState": "Alerting",
      "for": "5m",
      "annotations": {
        "summary": "Inference latency exceeds 500ms threshold",
        "description": "The p95 inference latency is {{ $values.A }}ms, which exceeds the 500ms threshold. This may indicate performance degradation."
      },
      "labels": {
        "severity": "warning",
        "team": "mlops"
      }
    },
    {
      "uid": "data-drift-spike",
      "title": "Data Drift Ratio Spike Alert",
      "condition": "A",
      "data": [
        {
          "refId": "A",
          "queryType": "",
          "relativeTimeRange": {
            "from": 300,
            "to": 0
          },
          "datasourceUid": "prometheus",
          "model": {
            "expr": "rate(data_drift_requests_total[5m]) / rate(prediction_requests_total[5m])",
            "refId": "A",
            "legendFormat": "Drift Ratio",
            "intervalMs": 1000,
            "maxDataPoints": 43200
          }
        }
      ],
      "noDataState": "NoData",
      "execErrState": "Alerting",
      "for": "5m",
      "annotations": {
        "summary": "Data drift ratio has spiked",
        "description": "The data drift ratio is {{ $values.A }}, indicating a significant increase in out-of-distribution feature values. Model performance may be degraded."
      },
      "labels": {
        "severity": "critical",
        "team": "mlops"
      }
    }
  ]
}

